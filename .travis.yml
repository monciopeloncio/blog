# R for travis: see documentation at https://docs.travis-ci.com/user/languages/r

language: R
sudo: false
cache:
  packages: true

branches:
  only:
    - master

## Use patched devtools
r_github_packages:
  - hadley/devtools@efa894ffa

before_script:
- apt-get install libstdc++6
- chmod +x deploy.sh
- Rscript -e 'blogdown::install_hugo()'

script:
- Rscript -e 'blogdown::build_site(local = Sys.getenv("TRAVIS_PULL_REQUEST_BRANCH") != "")'

after_success:
- ./deploy.sh
